package com.server_application.ssd.Repository;

import com.server_application.ssd.Models.Cart;
import com.server_application.ssd.Models.Item;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.stereotype.Repository;

import java.util.List;

@Repository
public interface ItemRepository extends JpaRepository<Item, Integer> {
    Item findById(int userId);

    List<Item> findAll();
    @Modifying
    @Query(value = "SELECT LAST_INSERT_ID()",nativeQuery = true)
    int getNewItemId();
    @Modifying
    @Query(value = "INSERT INTO Item_imageUrls (Item_id, imageUrls) VALUES (:itemId, :imageUrls)",nativeQuery = true)
    void addNewItem(int itemId, String imageUrls);

    @Modifying
    @Query(value = "UPDATE items SET name = :name, price = :price, description = :description, quantity = :quantity WHERE id = :id",nativeQuery = true)
    void updateItemById(String name, String price, String description, int quantity, int id);
    @Modifying
    @Query(value = "DELETE FROM Item_imageUrls WHERE Item_id = :itemId",nativeQuery = true)
    void deleteImageUrlsSql(int itemId);
    @Modifying
    @Query(value = "INSERT INTO Item_imageUrls (Item_id, imageUrls) VALUES (:itemId, :imageUrl)",nativeQuery = true)
    void insertImageUrlsSql(int itemId, String imageUrl);

    Item findTopByOrderByIdDesc();
}
